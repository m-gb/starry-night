(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(51)},28:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),o=(a(27),a(28),a(2)),s=a(3),l=a(5),u=a(4),h=a(6),m=a(19),d=a.n(m),p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={error:void 0,info:void 0},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",{className:"text-light"},r.a.createElement("h3",{className:"error-message"},this.state.error.message)):this.props.children}}]),t}(n.Component),w=a(20),f=a(21),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleQueryChange=function(e){a.setState({query:e.currentTarget.value})},a.handleSearch=function(e){e.preventDefault(),a.props.submitSearch(a.state.query)},a.state={query:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"form-inline",onSubmit:this.handleSearch},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"form-control",type:"search",value:this.state.query,name:"SearchBar",id:"SearchBar",placeholder:"Enter City",onChange:this.handleQueryChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info",onClick:this.handleSearch},r.a.createElement(w.a,{icon:f.a})))))}}]),t}(n.Component),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=e.currentTarget.innerText;a.props.convertUnit(t)},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"border border-info mx-2 rounded"},r.a.createElement("button",{className:"btn text-light ".concat("C"==this.props.unit?"btn-info":""),onClick:this.handleClick},"C"),r.a.createElement("button",{className:"btn text-light ".concat("F"==this.props.unit?"btn-info":""),onClick:this.handleClick},"F"))}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sendNewUnitToParent=function(e){a.props.convertUnit(e)},a.sendNewQueryToParent=function(e){a.props.submitSearch(e)},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},r.a.createElement("div",{className:"collapse navbar-collapse"},r.a.createElement("span",{className:"navbar-brand text-info"},r.a.createElement("img",{className:"logo",src:"favicon.ico"})," Starry Night")),r.a.createElement(b,{convertUnit:this.sendNewUnitToParent,unit:this.props.unit}),r.a.createElement(v,{submitSearch:this.sendNewQueryToParent}))}}]),t}(n.Component);function g(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}function E(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday ","Friday","Saturday"][new Date(e).getDay()]}function N(e){return[300,301,302,310,311,313,314,321,500,501,502,503,504,511,520,521,522,531,611,612,615,616,620,701].includes(e)?"wi-blue":[210,211,212,221,731,761,762,800].includes(e)?"wi-yellow":"wi-gray"}function S(e){try{var t="".concat(e.name,", ").concat(e.sys.country),a=e.weather[0].id,n=e.weather[0].description,r=E(1e3*e.dt),c=new Date(1e3*e.dt);return{location:t,weatherId:a,weatherDesc:n,day:r,date:"".concat(c.getDate()," ").concat((i=1e3*e.dt,["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(i).getMonth()])," ").concat(c.getFullYear()),temp:Math.round(e.main.temp),pressure:e.main.pressure,humidity:e.main.humidity,windSpeed:e.wind.speed}}catch(o){throw new Error("There was an issue parsing the weather data: ".concat(o.message))}var i}var j=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=S(this.props.currentWeatherData);return r.a.createElement("div",null,r.a.createElement("h5",{className:"text-center py-3"},e.location),r.a.createElement("div",{className:"row pb-5"},r.a.createElement("div",{className:"col-lg-3 text-center"},r.a.createElement("div",{className:"pt-5"},r.a.createElement("h3",null,e.day),r.a.createElement("h3",null,e.date))),r.a.createElement("div",{className:"col-lg-3 text-center"},r.a.createElement("i",{className:"current-img wi ".concat(N(e.weatherId)," wi-owm-").concat(e.weatherId)}),r.a.createElement("h5",{className:"pt-5"},g(e.weatherDesc))),r.a.createElement("div",{className:"col-lg-3 text-center"},r.a.createElement("h1",{className:"pt-5"}," ",e.temp,r.a.createElement("i",{className:"wi wi-degrees"}))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{className:"pt-4"},r.a.createElement("p",{className:"my-3",title:"Humidity"},r.a.createElement("i",{className:"wi wi-blue wi-humidity"})," ",e.humidity,"%"),r.a.createElement("p",{className:"my-3",title:"Pressure"},r.a.createElement("i",{className:"wi wi-yellow wi-barometer"})," ",e.pressure," hPa"),r.a.createElement("p",{className:"my-3",title:"Wind Speed"},r.a.createElement("i",{className:"wi wi-gray wi-strong-wind"})," ",e.windSpeed," ",this.props.windSpeedUnit)))))}}]),t}(n.Component);var O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showForecastdata=function(e){return e.map(function(e){return r.a.createElement("div",{className:"col-lg-3",key:e.day},r.a.createElement("div",{className:"card bg-dark text-center mb-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.day),r.a.createElement("p",{className:"card-text"},e.temp,r.a.createElement("i",{className:"wi wi-degrees"})),r.a.createElement("p",{className:"card-text"},g(e.weatherDesc)),r.a.createElement("i",{className:"forecast-img wi ".concat(N(e.weatherId)," wi-owm-").concat(e.weatherId)}))))})},a.state={weatherData:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=function(e){try{var t=e.list.filter(function(e){return e.dt_txt.split(" ")[1].includes("12")}),a=new Date(Date.now()),n="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate()),r=new Date(1e3*t[0].dt);return"".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate())==n?t.shift():t.pop(),t}catch(c){throw new Error("There was an issue sorting the forecast data: ".concat(c.message))}}(this.props.forecastWeatherData).map(function(e){return function(e){try{return{weatherId:e.weather[0].id,weatherDesc:e.weather[0].description,temp:Math.round(e.main.temp),day:E(1e3*e.dt)}}catch(t){throw new Error("There was an issue parsing the forecast data: ".concat(t.message))}}(e)});this.setState({weatherData:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},this.showForecastdata(this.state.weatherData))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onConvertUnit=function(e){a.setState({unit:e,forecastWeatherData:void 0},a.notifyStateChange)},a.onSubmitSearch=function(e){a.setState({query:e,coordinates:void 0},a.notifyStateChange)},a.state={query:"",unit:"C"},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=navigator.geolocation;if(!t)throw new Error("Geolocation is not supported by the browser.");t.getCurrentPosition(function(t){e.setState({coordinates:{latitude:t.coords.latitude,longitude:t.coords.longitude}},e.notifyStateChange)},function(){e.setState(function(){throw new Error("Geolocation permission was denied.")})})}},{key:"notifyStateChange",value:function(){var e=this,t=void 0!=this.state.coordinates,a=""!=this.state.query;(t||a)&&(this.fetchWeatherForecast(this.state.coordinates,"weather").then(function(t){e.setState({currentWeatherData:t})}).catch(function(t){e.setState(function(){throw new Error("There was an issue processing the weather service data: ".concat(t.message))})}),this.fetchWeatherForecast(this.state.coordinates,"forecast").then(function(t){e.setState({forecastWeatherData:t})}).catch(function(t){e.setState(function(){throw new Error("There was an issue processing the weather service data: ".concat(t.message))})}))}},{key:"fetchWeatherForecast",value:function(e,t){var a=this,n="".concat("52058024b4ce216ce76794fd8d5eb52e"),r=e?"lat=".concat(e.latitude,"&lon=").concat(e.longitude):"q=".concat(this.state.query),c="C"==this.state.unit?"metric":"imperial",i="".concat("https://api.openweathermap.org/data/2.5","/").concat(t,"?").concat(r,"&units=").concat(c,"&cnt=40&appid=").concat(n);return d.a.get(i).then(function(e){return e.data}).catch(function(e){a.setState(function(){throw new Error("Failed to retrieve data from the weather service: ".concat(e.message))})})}},{key:"render",value:function(){var e=this.state.currentWeatherData,t=this.state.forecastWeatherData,a="C"==this.state.unit?"m/s":"miles/hr";return r.a.createElement("div",null,r.a.createElement(y,{convertUnit:this.onConvertUnit,submitSearch:this.onSubmitSearch,unit:this.state.unit}),r.a.createElement("div",{className:"text-light"},e&&t?r.a.createElement("main",{className:"container"},r.a.createElement(p,null,r.a.createElement(j,{currentWeatherData:e,windSpeedUnit:a}),r.a.createElement(O,{forecastWeatherData:t}))):r.a.createElement("main",{className:"container"},r.a.createElement("h3",{className:"error-message"},"Please allow location access or enter a city in the search bar."))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(p,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.910972b7.chunk.js.map