(this["webpackJsonpstarry-night"]=this["webpackJsonpstarry-night"]||[]).push([[0],{29:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(20),c=a.n(r),s=(a(28),a(29),a(3)),i=a(4),o=a(6),h=a(5),l=a(21),d=a.n(l),u=a(0),j=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={error:void 0,info:void 0},n}return Object(i.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){return this.state.error?Object(u.jsx)("div",{className:"text-light error-background",children:Object(u.jsx)("h3",{className:"error-message",children:this.state.error.message})}):this.props.children}}]),a}(n.Component),b=(a(48),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(u.jsx)("div",{id:"home",children:Object(u.jsxs)("div",{className:"info",children:[Object(u.jsx)("h1",{children:Object(u.jsx)("b",{children:"Starry Night"})}),Object(u.jsx)("p",{children:"This website uses the OpenWeatherMap service to retrieve and display the current weather, as well as the forecast for the next 4 days."}),Object(u.jsx)("p",{children:"You can choose to provide your current location by allowing geolocation access, or enter a desired location in the search bar (in English or Hebrew)."}),Object(u.jsx)("p",{children:"It's also possible to convert the units from Celsius to Fahrenheit."})]})})}}]),a}(n.Component)),m=a(22),p=a(23),w=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleQueryChange=function(e){n.setState({query:e.currentTarget.value})},n.handleSearch=function(e){e.preventDefault(),n.props.submitSearch(n.state.query)},n.state={query:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(u.jsx)("form",{className:"form-inline",onSubmit:this.handleSearch,children:Object(u.jsxs)("div",{className:"input-group",children:[Object(u.jsx)("input",{className:"form-control",type:"search",value:this.state.query,name:"SearchBar",id:"SearchBar",placeholder:"Enter City",onChange:this.handleQueryChange}),Object(u.jsx)("div",{className:"input-group-append",children:Object(u.jsx)("button",{className:"btn btn-outline-info",onClick:this.handleSearch,children:Object(u.jsx)(m.a,{icon:p.a})})})]})})}}]),a}(n.Component),O=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a=t.currentTarget.innerText;e.props.convertUnit(a)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"border border-info mx-2 rounded unit-button float-right",children:[Object(u.jsx)("button",{className:"btn text-light ".concat("C"===this.props.unit?"btn-info":""),onClick:this.handleClick,children:"C"}),Object(u.jsx)("button",{className:"btn text-light ".concat("F"===this.props.unit?"btn-info":""),onClick:this.handleClick,children:"F"})]})}}]),a}(n.Component),f=a.p+"static/media/favicon.a4009289.ico",v=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).sendNewUnitToParent=function(t){e.props.convertUnit(t)},e.sendNewQueryToParent=function(t){e.props.submitSearch(t)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("nav",{className:"navbar navbar-expand-md",children:[Object(u.jsx)("div",{className:"collapse navbar-collapse",children:Object(u.jsxs)("span",{className:"navbar-brand text-info",children:[Object(u.jsx)("img",{alt:"",className:"logo",src:f})," Starry Night"]})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-4",children:Object(u.jsx)(O,{convertUnit:this.sendNewUnitToParent,unit:this.props.unit})}),Object(u.jsx)("div",{className:"col-8",children:Object(u.jsx)(w,{submitSearch:this.sendNewQueryToParent})})]})]})}}]),a}(n.Component);function x(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}function y(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday ","Friday","Saturday"][new Date(e).getDay()]}function g(e){return[300,301,302,310,311,313,314,321,500,501,502,503,504,511,520,521,522,531,611,612,615,616,620,701].includes(e)?"wi-blue":[210,211,212,221,731,761,762,800].includes(e)?"wi-yellow":"wi-gray"}function N(e){try{var t="".concat(e.name,", ").concat(e.sys.country),a=e.weather[0].id,n=e.weather[0].description,r=y(1e3*e.dt),c=new Date(1e3*e.dt);return{location:t,weatherId:a,weatherDesc:n,day:r,date:"".concat(c.getDate()," ").concat((s=1e3*e.dt,["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(s).getMonth()])," ").concat(c.getFullYear()),temp:Math.round(e.main.temp),pressure:e.main.pressure,humidity:e.main.humidity,windSpeed:e.wind.speed}}catch(i){throw new Error("There was an issue parsing the weather data: ".concat(i.message))}var s}var S=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=N(this.props.currentWeatherData);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h5",{className:"text-center py-3",children:e.location}),Object(u.jsxs)("div",{className:"row pb-5",children:[Object(u.jsx)("div",{className:"col-lg-3 text-center",children:Object(u.jsxs)("div",{className:"pt-5",children:[Object(u.jsx)("h3",{children:e.day}),Object(u.jsx)("h3",{children:e.date})]})}),Object(u.jsxs)("div",{className:"col-lg-3 text-center",children:[Object(u.jsx)("i",{className:"current-img wi ".concat(g(e.weatherId)," wi-owm-").concat(e.weatherId)}),Object(u.jsx)("h5",{className:"pt-5",children:x(e.weatherDesc)})]}),Object(u.jsx)("div",{className:"col-lg-3 text-center",children:Object(u.jsxs)("h1",{className:"pt-5",children:[" ",e.temp,Object(u.jsx)("i",{className:"wi wi-degrees"})]})}),Object(u.jsx)("div",{className:"col-lg-3",children:Object(u.jsxs)("div",{className:"pt-4",children:[Object(u.jsxs)("p",{className:"my-3",title:"Humidity",children:[Object(u.jsx)("i",{className:"wi wi-blue wi-humidity"})," ",e.humidity,"%"]}),Object(u.jsxs)("p",{className:"my-3",title:"Pressure",children:[Object(u.jsx)("i",{className:"wi wi-yellow wi-barometer"})," ",e.pressure," hPa"]}),Object(u.jsxs)("p",{className:"my-3",title:"Wind Speed",children:[Object(u.jsx)("i",{className:"wi wi-gray wi-strong-wind"})," ",e.windSpeed," ",this.props.windSpeedUnit]})]})})]})]})}}]),a}(n.Component);var C=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showForecastdata=function(e){return e.map((function(e){return Object(u.jsx)("div",{className:"col-lg-3",children:Object(u.jsx)("div",{className:"card card-bg text-center mb-4",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:e.day}),Object(u.jsxs)("p",{className:"card-text",children:[e.temp,Object(u.jsx)("i",{className:"wi wi-degrees"})]}),Object(u.jsx)("p",{className:"card-text",children:x(e.weatherDesc)}),Object(u.jsx)("i",{className:"forecast-img wi ".concat(g(e.weatherId)," wi-owm-").concat(e.weatherId)})]})})},e.day)}))},n.state={weatherData:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=function(e){try{var t=e.list.filter((function(e){return e.dt_txt.split(" ")[1].includes("12")})),a=new Date(Date.now()),n="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate()),r=new Date(1e3*t[0].dt);return"".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate())===n?t.shift():t.pop(),t}catch(c){throw new Error("There was an issue sorting the forecast data: ".concat(c.message))}}(this.props.forecastWeatherData).map((function(e){return function(e){try{return{weatherId:e.weather[0].id,weatherDesc:e.weather[0].description,temp:Math.round(e.main.temp),day:y(1e3*e.dt)}}catch(t){throw new Error("There was an issue parsing the forecast data: ".concat(t.message))}}(e)}));this.setState({weatherData:e})}},{key:"render",value:function(){return Object(u.jsx)("div",{className:"row",children:this.showForecastdata(this.state.weatherData)})}}]),a}(n.Component),D=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onConvertUnit=function(e){n.setState({unit:e,forecastWeatherData:void 0},n.notifyStateChange)},n.onSubmitSearch=function(e){n.setState({query:e,coordinates:void 0},n.notifyStateChange)},n.state={query:"",unit:"C"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=navigator.geolocation;if(!t)throw new Error("Geolocation is not supported by the browser.");t.getCurrentPosition((function(t){e.setState({coordinates:{latitude:t.coords.latitude,longitude:t.coords.longitude}},e.notifyStateChange)}),(function(){e.setState((function(){throw new Error("Geolocation permission was denied.")}))}))}},{key:"notifyStateChange",value:function(){var e=this,t=void 0!==this.state.coordinates,a=""!==this.state.query;(t||a)&&(this.fetchWeatherForecast(this.state.coordinates,"weather").then((function(t){e.setState({currentWeatherData:t})})).catch((function(t){e.setState((function(){throw new Error("There was an issue processing the weather service data: ".concat(t.message))}))})),this.fetchWeatherForecast(this.state.coordinates,"forecast").then((function(t){e.setState({forecastWeatherData:t})})).catch((function(t){e.setState((function(){throw new Error("There was an issue processing the weather service data: ".concat(t.message))}))})))}},{key:"fetchWeatherForecast",value:function(e,t){var a=this,n="".concat("52058024b4ce216ce76794fd8d5eb52e"),r=e?"lat=".concat(e.latitude,"&lon=").concat(e.longitude):"q=".concat(this.state.query),c="C"===this.state.unit?"metric":"imperial",s="".concat("https://api.openweathermap.org/data/2.5","/").concat(t,"?").concat(r,"&units=").concat(c,"&cnt=40&appid=").concat(n);return d.a.get(s).then((function(e){return e.data})).catch((function(e){a.setState((function(){throw new Error("Failed to retrieve data from the weather service: ".concat(e.message))}))}))}},{key:"render",value:function(){var e=this.state.currentWeatherData,t=this.state.forecastWeatherData,a="C"===this.state.unit?"m/s":"miles/hr";return Object(u.jsxs)("div",{children:[Object(u.jsx)(b,{}),Object(u.jsxs)("div",{className:"weather-data",children:[Object(u.jsx)(v,{convertUnit:this.onConvertUnit,submitSearch:this.onSubmitSearch,unit:this.state.unit}),Object(u.jsx)("div",{className:"text-light data-background",children:e&&t?Object(u.jsx)("main",{className:"container",children:Object(u.jsxs)(j,{children:[Object(u.jsx)(S,{currentWeatherData:e,windSpeedUnit:a}),Object(u.jsx)(C,{forecastWeatherData:t})]})}):Object(u.jsx)("main",{className:"container",children:Object(u.jsx)("h3",{className:"error-message",children:"Please allow location access or enter a city in the search bar."})})})]})]})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(u.jsx)(j,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.6e2a44e7.chunk.js.map